Useful 3D object transformations
================================

1.  3Dwarehouse
---------------

Not all files in 3Dwarehouse are downloadable.  This is annoying
because non-downloadable models clutter up the site and make it
difficult to find what you want.  One tip is that the Advanced Search
screen has an option to ignore models which cannot be downloaded.

Once you have a downloadable model, you have to decide whether you
will be editing it further with Sketchup.  If you won't, download it
in COLLADA format and go to transformation 3, below.  If you will be
editing it, download it in Sketchup format.  When you have finished
editing, go to transformation 2.

2.  Sketchup to COLLADA
-----------------------

If you have a model in Sketchup, and you want to use it in a game, you
should export it as COLLADA.  The export options should be set as
follows:


[X] Export Two-Sided Faces
[ ] Export Edges
[X] Triangulate All Faces
[ ] Export Only Selection Set
[ ] Export Hidden Geometry
[ ] Preserve Component Hierarchies

[X] Export Texture Maps
[ ] Use "Color By Layer" Materials

[X] Preserve Credits


This will give you a usable COLLADA file.  Continue to transformation
3 to get it into Panda.

3.  COLLADA to Panda
--------------------

Run dae2egg on your file.  This will give you a text file which can be
loaded into Panda.  You can optionally run egg2bam on the egg file, to
compress it and speed up loading.

You may find that the paths to your texture files don't end up
pointing to the place where you want to keep them.  If this happens,
it's often easiest to fix it by editing the egg file (with a text
editor or a script).  It's a simple text format so it's easy to make
this kind of change.

4.  COLLADA to Blender
----------------------

If you have a Sketchup model, I would suggest that you edit it in
Sketchup if you can.  Converting it to another format is unlikely to
preserve all the information in the file.  However, you may be forced
to convert, perhaps because you don't run Windows or because you want
to combine it with something that is already in Blender.

Blender ships with a COLLADA importer, but there is a bug which
results in the wrong textures being assigned to some of the faces of
the model.  You could reapply the textures, but this would be rather
tedious for a complex model.

A better option is the Open Asset Import Library,
http://assimp.sourceforge.net .  At the time of writing, you need to
download a pre-release version, like this:

svn co https://assimp.svn.sourceforge.net/svnroot/assimp/trunk assimp

I ended up with revision 1231.  If you try this and it doesn't work,
try checking out this exact revision.

You then build Assimp yourself, following the instructions on the
website.  Once you have built it, convert the COLLADA file to
Wavefront:

assimp export model.dae model.obj

This can be imported into Blender using the Wavefront importer.

(There are other programs which convert COLLADA to Wavefront, but as
usual, many of them give unsatisfactory results.  In particular, many
of them fail to export the textures properly.)

5.  Blender to Panda
--------------------

Follow the first option (YABEE) on this page:

http://www.panda3d.org/manual/index.php/Converting_from_Blender

Before exporting you must apply all modifiers except the armature.  Be
very careful that you undo this after exporting, or (assuming the
modifiers are required) you will lose your work.

To create for example a walk cycle, first create it as a regular
Blender animation.  You can have several in the same file, one after
the other.  Then, during export, enter the start and end frames of
each animation into YABEE's dialogue box.

Underneath this dialogue box are various options.  Set them as
follows:


[ ] Animation only
[ ] Separate animation files *
    TBS generation: No
    Tex. process:   Simple
[ ] UV as texture
[ ] Copy texture files


* This one is up to you, but I think it's convenient to store
  everything in one file.
